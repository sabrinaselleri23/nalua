<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NALUA â€” Apoio e ConscientizaÃ§Ã£o em SaÃºde Mental</title>

  <!-- Ãcone do site -->
  <link rel="icon" type="image/png" href="favicon.png">

  <!-- Estilos -->
  <style>
    :root {
      --bg: #1f0033;
      --accent: #7b4dbb;
      --accent-2: #a47be6;
      --card: #2a003f;
      --muted: #cfc7e9;
      --round: 12px;
      --maxw: 1100px;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Inter", system-ui, -apple-system, "Helvetica Neue", Arial, sans-serif;
      background: linear-gradient(180deg, var(--bg), #12001a);
      color: var(--muted);
    }
    header {
      display: flex;
      align-items: center;
      gap: 18px;
      padding: 18px 24px;
      background: linear-gradient(90deg, rgba(255,255,255,0.02), transparent);
      position: sticky;
      top: 0;
      z-index: 20;
      border-bottom: 1px solid rgba(255,255,255,0.03);
      backdrop-filter: blur(4px);
    }
    .header-left { display: flex; align-items: center; gap: 16px; }
    #site-logo { width: 120px; height: auto; border-radius: 50px; object-fit: contain; }
    .subtitle { color: var(--muted); font-size: 14px; margin: 0; }
    nav { margin-left: auto; display: flex; gap: 14px; align-items: center; }
    nav a { color: var(--muted); text-decoration: none; padding: 8px 12px; border-radius: 10px; transition: all 0.18s; font-weight: 600; font-size: 15px; }
    nav a:hover { background: rgba(255,255,255,0.03); transform: translateY(-2px); color: white; }
    .container { max-width: var(--maxw); margin: 24px auto; padding: 0 18px; }
    .hero { background: linear-gradient(180deg, rgba(123, 77, 187, 0.18), rgba(164, 123, 230, 0.05)); border-radius: var(--round); padding: 28px; display:flex; gap:24px; align-items:center; }
    .hero h2 { margin:0; font-size:34px; color:white; }
    .hero p { margin:8px 0 0 0; color:#e9e6ff; opacity:0.9; }
    .grid { display:grid; grid-template-columns:1fr 360px; gap:20px; margin-top:18px; }
    .card { background: var(--card); border-radius: var(--round); padding:14px; box-shadow:0 6px 18px rgba(0,0,0,0.35); border:1px solid rgba(255,255,255,0.02); }
    .card h3 { margin-top:0; color:white; }
    .chat-btn { background: linear-gradient(180deg, var(--accent), var(--accent-2)); color:white; border:none; padding:12px 16px; border-radius:12px; cursor:pointer; display:inline-flex; gap:10px; align-items:center; box-shadow:0 8px 20px rgba(123,77,187,0.24); font-weight:700; font-size:15px; text-decoration:none; transition:0.2s; }
    .chat-btn:hover { transform:translateY(-2px); box-shadow:0 10px 22px rgba(123,77,187,0.3); }
    .chat-btn.secondary { background:transparent; border:1px solid rgba(255,255,255,0.06); color:var(--muted); box-shadow:none; }
    #map { height:500px; border-radius:10px; overflow:hidden; }
    .modal { position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:60; }
    .modal.show { display:flex; }
    .modal .panel { width:440px; max-width:96%; background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.015)); padding:18px; border-radius:12px; border:1px solid rgba(255,255,255,0.03); max-height:90%; overflow-y:auto; }
    .close-btn { background:transparent; border:none; color:var(--muted); float:right; font-size:18px; cursor:pointer; }
    footer { margin-top:28px; padding:18px 0; text-align:center; color:rgba(255,255,255,0.6); }
    @media (max-width:880px){
      .grid { grid-template-columns:1fr; }
      nav { display:none; }
      header { padding:12px; }
      #site-logo { width:50px; }
      .hero { flex-direction:column; text-align:center; }
      .hero .right { width:100%; }
    }
  </style>
</head>
<body>
<header>
  <div class="header-left">
    <img id="site-logo" src="favicon.png" alt="Logo Na Lua">
    <p class="subtitle">Apoio e ConscientizaÃ§Ã£o em SaÃºde Mental</p>
  </div>
  <nav>
    <!-- menu -->
  </nav>
</header>

<main class="container">
  <section id="inicio" class="hero card">
    <div class="left">
      <h2>Bem-vindo Ã  NALUA</h2>
      <p>Encontre apoio e desabafe com nosso chatbot seguro.</p>
    </div>
  </section>

  <div class="grid">
    <div>
      <section id="ajuda" class="card">
        <h3>Recursos de Ajuda RÃ¡pida</h3>
        <ul>
          <li>Contato via WhatsApp</li>
          <li>Links Ãºteis: CVV, CAPS, CRAS</li>
        </ul>
        <div class="buttons">
          <a class="chat-btn" id="whatsappQuick" href="#" target="_blank">ðŸ’¬ WhatsApp</a>
        </div>
      </section>
    </div>

    <aside>
      <section id="mapa" class="card">
        <h3>Mapa de Apoio</h3>
        <div id="map"></div>
      </section>

      <section id="chatbot" class="card">
        <h3>Chatbot de Acolhimento</h3>
        <p>Converse com nossa IA segura. Se houver risco, serÃ¡ conectado a atendimento humano.</p>
        <button class="chat-btn" id="openChatBtn2">Abrir Chat</button>
      </section>
    </aside>
  </div>
  <footer>
    <small>Desenvolvido para fins acadÃªmicos â€” NA LUA Â© 2025</small>
  </footer>
</main>

<div class="modal" id="chatModal">
  <div class="panel">
    <div class="chat-header">
      <h3>Acolhimento â€” NA LUA</h3>
      <button class="close-btn" id="closeModal">&times;</button>
    </div>
    <div class="chat-body" id="chatBody"></div>
    <textarea id="chatInput" placeholder="Digite sua mensagem..."></textarea>
    <button id="sendBtn">Enviar</button>
  </div>
</div>

<!-- Scripts -->
<script>
const chatModal = document.getElementById('chatModal');
const chatBody = document.getElementById('chatBody');
const chatInput = document.getElementById('chatInput');
const sendBtn = document.getElementById('sendBtn');
const openChatBtn = document.getElementById('openChatBtn2');
const closeModalBtn = document.getElementById('closeModal');

const PHONE_NUMBER = "5521975452824";

function waUrl(phone, text) {
  return `https://api.whatsapp.com/send?phone=${phone}&text=${encodeURIComponent(text)}`;
}

function abrirWhatsApp() {
  window.open(waUrl(PHONE_NUMBER, "Preciso de ajuda."), "_blank");
}

openChatBtn.onclick = () => chatModal.classList.add('show');
closeModalBtn.onclick = () => chatModal.classList.remove('show');

const palavrasDeRisco = ["nÃ£o aguento","quero acabar","nÃ£o quero mais","suicÃ­dio","acabou","desespero","triste demais","sofrendo"];
const palavrasTristeza = ["triste","deprimido","sofrendo","cansado","solidÃ£o"];
const palavrasAnsiedade = ["ansioso","preocupado","medo","inseguro","nervoso"];
const palavrasRaiva = ["raiva","irritado","frustrado","injustiÃ§a"];
const palavrasAlivio = ["aliviado","feliz","grato","melhor"];

function mensagemDeRisco(texto) {
  texto = texto.toLowerCase();
  return palavrasDeRisco.some(p => texto.includes(p));
}

function respostaHumanaInteligente(texto) {
  texto = texto.toLowerCase();
  if (mensagemDeRisco(texto)) return "Percebo que vocÃª estÃ¡ passando por um momento muito difÃ­cil. Vamos conectar vocÃª a atendimento humano.";
  if (palavrasTristeza.some(p => texto.includes(p))) return "Entendo que vocÃª estÃ¡ triste. Quer me contar mais sobre o que sente?";
  if (palavrasAnsiedade.some(p => texto.includes(p))) return "Vejo que vocÃª estÃ¡ ansioso(a). Respire fundo comigo.";
  if (palavrasRaiva.some(p => texto.includes(p))) return "Percebo que estÃ¡ frustrado(a). Podemos conversar sobre isso.";
  if (palavrasAlivio.some(p => texto.includes(p))) return "Fico feliz que se sinta melhor! Quer compartilhar mais?";
  return "Obrigado por compartilhar. Estou aqui para ouvir vocÃª.";
}

function adicionarMensagem(conteudo, classe) {
  const msgEl = document.createElement('div');
  msgEl.className = `message ${classe}`;
  msgEl.textContent = conteudo;
  chatBody.appendChild(msgEl);
  chatBody.scrollTop = chatBody.scrollHeight;
}

function enviarMensagem() {
  const userMessage = chatInput.value.trim();
  if (!userMessage) return;
  chatInput.value = "";
  adicionarMensagem(userMessage, "user");
  const resposta = respostaHumanaInteligente(userMessage);
  setTimeout(() => {
    adicionarMensagem(resposta, "bot");
    if (mensagemDeRisco(userMessage)) abrirWhatsApp();
  }, 500 + Math.random()*500);
}

sendBtn.onclick = enviarMensagem;
chatInput.addEventListener('keypress', (e) => { if(e.key==='Enter'){ e.preventDefault(); enviarMensagem(); } });
</script>

<!-- Google Maps Dark Theme -->
<script src="https://maps.googleapis.com/maps/api/js?key=SUA_CHAVE_AQUI&libraries=places"></script>
<script>
function initMap() {
  const mapEl = document.getElementById("map");
  const defaultLocation = { lat: -23.55052, lng: -46.633308 }; // SÃ£o Paulo
  const map = new google.maps.Map(mapEl, {
    center: defaultLocation,
    zoom: 13,
    styles: [
      {elementType: 'geometry', stylers: [{color: '#1f0033'}]},
      {elementType: 'labels.text.fill', stylers: [{color: '#cfc7e9'}]},
      {elementType: 'labels.text.stroke', stylers: [{color: '#1f0033'}]},
      {featureType: 'administrative', elementType: 'geometry', stylers:[{color:'#2a003f'}]},
      {featureType: 'poi', elementType:'geometry', stylers:[{color:'#2a003f'}]},
      {featureType: 'road', elementType:'geometry', stylers:[{color:'#3a003f'}]},
      {featureType: 'water', elementType:'geometry', stylers:[{color:'#12001a'}]}
    ]
  });

  const infoWindow = new google.maps.InfoWindow();

  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      (position) => {
        const userPos = { lat: position.coords.latitude, lng: position.coords.longitude };
        map.setCenter(userPos);
        new google.maps.Marker({ position: userPos, map: map, title: "VocÃª estÃ¡ aqui", icon:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png" });
        buscarApoio(userPos, map, infoWindow);
      },
      () => buscarApoio(defaultLocation, map, infoWindow)
    );
  } else {
    buscarApoio(defaultLocation, map, infoWindow);
  }
}

function buscarApoio(location, map, infoWindow) {
  const service = new google.maps.places.PlacesService(map);
  const tipos = ["health","hospital","local_government_office"];
  tipos.forEach(tipo => {
    service.nearbySearch({ location, radius: 5000, keyword: tipo }, (results, status) => {
      if(status === google.maps.places.PlacesServiceStatus.OK && results) {
        results.forEach(place => {
          const marker = new google.maps.Marker({ map, position: place.geometry.location, title: place.name });
          marker.addListener("click", () => infoWindow.setContent(`<strong>${place.name}</strong><br>${place.vicinity}`) && infoWindow.open(map, marker));
        });
      }
    });
  });
}

window.addEventListener("load", initMap);
</script>
</body>
</html>
